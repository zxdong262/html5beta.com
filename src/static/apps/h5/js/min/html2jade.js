$(function () { $('.do').click(function () { const t = $('.t1'); const r = $('.t2'); const a = t.val(); const e = $(this); a && !e.data('working') && (e.data('working', !0).text(e.text() + ' working...'), $.ajax({ type: 'post', url: '/html2jade', dataType: 'json', data: { src: a }, success: function (t) { e.data('working', !1).text(e.text().replace(' working...', '')), $('.post .err').remove(), $('.post').prepend('<div class="pdtb err"></div>'), t.errorMsg ? ht.alert(t.errorMsg, 'warn', $('.err')) : r.val(t.output) } })) }) })
