function initTimelines () { const i = ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch, location.href.split('#')[1]); $('.tab-content a').each(function () { const i = $(this); const n = i.prop('href'); n !== 'javascript:;' && i.prop('target', '_blank') }), $('#timeline .time-sections .times').each(function () { const i = $(this); const n = i.children().eq(0); const a = i.parent(); n.after('<span class="arr iblock">&raquo</span>'), i.append(a.hasClass('compact') ? '<a class="iblock expand on" href="javascript:">&dArr;</a>' : '<a class="iblock expand" href="javascript:">&lArr;</a>') }), $('#timeline .time-section.compact').each(function () { $(this).children('.projs').addClass('hide2'), $(this).children('.desc').addClass('hide2') }), $('#timeline .time-sections').on('click', '.times', function () { const i = $(this).find('a.expand'); i.hasClass('on') ? (i.removeClass('on').html('&lArr;'), i.parent().siblings().slideDown(500)) : (i.addClass('on').html('&dArr;'), i.parent().siblings().slideUp(500)) }), $('.btn-lang').click(function () { const i = $(this); i.children(':visible').text() !== '中文' ? ($('.lang.cn').addClass('hide'), $('.lang.en').removeClass('hide')) : ($('.lang.en').addClass('hide'), $('.lang.cn').removeClass('hide')) }), $('#timeline .tabs .tab').click(function () { const i = $(this); const n = i.prop('id').slice(4); const a = $('#timeline'); i.hasClass('on') || (i.addClass('on').siblings('.tab').removeClass('on'), a.children('.' + n).removeClass('hide').siblings('.tab-content').addClass('hide')) }), $('a.tab[href="#' + i + '"]').trigger('click') }$(document).ready(function () { initTimelines() })
